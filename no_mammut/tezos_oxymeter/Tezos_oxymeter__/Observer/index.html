<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Observer (tezos_oxymeter.Tezos_oxymeter__.Observer)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos_oxymeter</a> &#x00BB; <a href="../index.html">Tezos_oxymeter__</a> &#x00BB; Observer</nav><h1>Module <code>Tezos_oxymeter__.Observer</code></h1><nav class="toc"><ul><li><a href="#observer-modules">Observer modules</a></li><li><a href="#interact-with-observer">Interact with observer</a></li></ul></nav></header><aside><p>This module provides modules and functions to represent the interactions with the outside world.</p></aside><section><header><h2 id="observer-modules"><a href="#observer-modules" class="anchor"></a>Observer modules</h2></header><dl><dt class="spec module" id="module-Smartpower"><a href="#module-Smartpower" class="anchor"></a><code><span class="keyword">module</span> <a href="Smartpower/index.html">Smartpower</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Module that represents the abstract communication with a <a href="https://odroid.com/dokuwiki/doku.php?id=en:acc:smartpower2">smartpower</a> through sockets.</p></dd></dl><dl><dt class="spec module" id="module-Blind"><a href="#module-Blind" class="anchor"></a><code><span class="keyword">module</span> <a href="Blind/index.html">Blind</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Module that represents an observation without any metric returned.</p></dd></dl><dl><dt class="spec module" id="module-Mock"><a href="#module-Mock" class="anchor"></a><code><span class="keyword">module</span> <a href="Mock/index.html">Mock</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Module to generate random number when you observe it.</p></dd></dl><dl><dt class="spec type" id="type-observer"><a href="#type-observer" class="anchor"></a><code><span class="keyword">type</span> observer</code><code> = </code><table class="variant"><tr id="type-observer.Blind" class="anchored"><td class="def constructor"><a href="#type-observer.Blind" class="anchor"></a><code>| </code><code><span class="constructor">Blind</span></code></td><td class="doc"><p>Return a report with 0 everywhere.</p></td></tr><tr id="type-observer.Mock" class="anchored"><td class="def constructor"><a href="#type-observer.Mock" class="anchor"></a><code>| </code><code><span class="constructor">Mock</span></code></td><td class="doc"><p>Return a report with random numbers. For test purpose.</p></td></tr><tr id="type-observer.Smartpower" class="anchored"><td class="def constructor"><a href="#type-observer.Smartpower" class="anchor"></a><code>| </code><code><span class="constructor">Smartpower</span> <span class="keyword">of</span> <span><a href="Smartpower/index.html#type-station">Smartpower.station</a> Lwt.t</span></code></td><td class="doc"><p>Return a report from smartpower.</p></td></tr></table></dt><dd><p>Wrapper type to define the way to observe the consumption.</p></dd></dl></section><section><header><h2 id="interact-with-observer"><a href="#interact-with-observer" class="anchor"></a>Interact with observer</h2></header><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <span>string list</span> <span>&#45;&gt;</span> <a href="index.html#type-observer">observer</a></code></dt><dd><p>Create an observer from an argument list.</p><p>The arguments can be:</p><ul><li><code></code> or <code>&quot;off&quot;</code> for a <a href="Blind/index.html"><code>Blind</code></a> observer.</li><li><code>&quot;mock&quot;</code> for a <a href="Mock/index.html"><code>Mock</code></a> observer.</li><li><code>&quot;power&quot; ; host ; port</code> for a <a href="index.html#type-observer.Smartpower"><code>Smartpower</code></a> observer on host:port.</li></ul></dd></dl><dl><dt class="spec value" id="val-observe"><a href="#val-observe" class="anchor"></a><code><span class="keyword">val</span> observe : <a href="index.html#type-observer">observer</a> <span>&#45;&gt;</span> <span><a href="../../Tezos_oxymeter/Report/index.html#type-t">Tezos_oxymeter.Report.t</a> Lwt.t</span></code></dt><dd><p>Takes an <a href="index.html#type-observer"><code>observer</code></a> and returns the <a href="../Report/index.html#type-t"><code>Report.t</code></a> obtained. As some observers introduces asynchronous interactions, it's wrapped into an <span class="xref-unresolved" title="unresolved reference to &quot;Lwt.t&quot;"><code>Lwt</code>.t</span>.</p></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <a href="../../Tezos_oxymeter/Report/index.html#type-t">Tezos_oxymeter.Report.t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_string report</code> converts a <a href="../Report/index.html#type-t"><code>Report.t</code></a> into a sendable string.</p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-observer">observer</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp ppf observer</code> is used to pretty print an <a href="index.html#type-observer"><code>observer</code></a>.</p></dd></dl></section></div></body></html>